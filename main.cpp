/// Author: Azureian
/// Date Created: 2024-7-16
/// DISCLAIMER:  This is a fake malware made to teach people to not trust random files they download from people.
///              There has been scams going around on discord where people send you a "game" that truly just steals your token.
///              THIS IS NOT REAL MALWARE! All it does is lock your cursor and display a message.
///              It also creates a file in %temp% with the source code link of this program.
///              This does not steal any information from you, nor does it harm your computer in any way.

/// How to compile:
/// g++ main.cpp -o ExeName.exe -mwindows
/// Explanation:
///     g++           is the standard compiler for the C++ programming language.
///     main.cpp      is the name of the file that you want to compile.
///     -o            is the flag that is used to specify the name of the output file.
///     ExeName.exe   is the name of the output file.
///     -mwindows     is the flag that is used to compile the program as a Windows application.

#include <windows.h>
#include <thread>
#include <fstream>
#include <string>
#include <iostream>
bool stillrunning = true;
void lockthread()
{
    RECT r = {GetSystemMetrics(SM_CXSCREEN)/2, GetSystemMetrics(SM_CYSCREEN)/2 + 50, GetSystemMetrics(SM_CXSCREEN)/2, GetSystemMetrics(SM_CYSCREEN)/2 + 50};

    while (stillrunning)
    {
        ClipCursor( &r );
    }
}
int main()
{
    
    //create a thread to lock the cursor
    std::thread lock(lockthread);
    //make a window the size of the screen and make it fullscreen, transparent, and always on top
    HWND hwnd = CreateWindowW(L"STATIC", L"", WS_VISIBLE | WS_POPUP, 0, 0, GetSystemMetrics(SM_CXSCREEN), GetSystemMetrics(SM_CYSCREEN), NULL, NULL, NULL, NULL);
    SetLayeredWindowAttributes(hwnd, RGB(0, 0, 0), 0, LWA_COLORKEY);
    SetWindowLong(hwnd, GWL_EXSTYLE, GetWindowLong(hwnd, GWL_EXSTYLE) | WS_EX_LAYERED | WS_EX_TRANSPARENT | WS_EX_TOPMOST);
    
    MessageBoxW(NULL, L"Hello, I'm Azureian, no my account was not hacked. [PRESS ENTER TO CONTINUE]", L"Who am I?", MB_OK);
    MessageBoxW(NULL, L"You're probably confused on what's happening. [PRESS ENTER TO CONTINUE]", L"What is happening?", MB_OK);
    MessageBoxW(NULL, L"Your cursor is locked as you may have noticed already.", L"Cursor Lock", MB_OK);
    MessageBoxW(NULL, L"I locked it so you wouldn't panic close the program and not recieve my message.", L"Why I locked it?", MB_OK);
    MessageBoxW(NULL, L"This is a fake malware.", L"Fake Malware", MB_OK);
    MessageBoxW(NULL, L"I made this to teach people to not trust random files they download from people.", L"Reason for this", MB_OK);
    MessageBoxW(NULL, L"There has been scams going around on discord where people send you a \"game\" that truly just steals your token.", L"Reason for this", MB_OK);
    //This program has not stolen any information from you, nor has it harmed your computer in any way.
    MessageBoxW(NULL, L"This program has not stolen any information from you, nor has it harmed your computer in any way.", L"What has it done to my computer?", MB_OK);
    MessageBoxW(NULL, L"This program has only locked your cursor and displayed this message.", L"What has it done to my computer?", MB_OK);
    MessageBoxW(NULL, L"It also created a file in %temp% with the source code link of this program.", L"What has it done to my computer?", MB_OK);
    //Say: Be smarter next time.
    MessageBoxW(NULL, L"Be smarter next time.", L"Final Message", MB_OK);
    //unlock the cursor
    ClipCursor(NULL);
    //create a txt file in %temp%\Azureian.txt with contents Source code for this: https://github.com/AzureianGH/FakeMalware
    stillrunning = false;
    lock.join();
    //close window
    DestroyWindow(hwnd);
    char* temp = getenv("TEMP");
    std::string path = (const char*) temp;
    path += "\\Azureian.txt";
    std::ofstream file(path);
    file << "Source code for this: https://github.com/AzureianGH/FakeMalware";
    file.close();

    //open the file with notepad
    ShellExecuteA(NULL, "open", "notepad.exe", path.c_str(), NULL, SW_SHOWNORMAL);

    //delete the file after giving notepad time to open
    std::this_thread::sleep_for(std::chrono::seconds(3));
    remove(path.c_str());
    //open browser
    ShellExecuteW(0, 0, L"https://github.com/AzureianGH/FakeMalware", 0, 0 , SW_SHOW );
    return 0;
}